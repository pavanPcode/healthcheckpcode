<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <title>Sales List</title>
</head>
<body>
    <div class="container mt-5">
        <h2>Sales List</h2>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Select</th>
                    <th>SuperId</th>
                    <th>Details</th>
                </tr>
            </thead>
            <tbody>
                {% for row in data %}
                <tr>
                    <td>
                        <input type="checkbox">
                    </td>
                    <td>{{ row['SuperId'] }}</td>
                    <td>
                        <a href="#" class="view-details" data-toggle="modal" data-target="#jobs-details-new"
                           data-superid="{{ row['SuperId'] }}"
                           data-customer="{{ row['CustomerInfo'] }}"
                           data-company="{{ row['CompanyInfo'] }}"
                           data-invoice="{{ row['InvoiceId'] }}"
                           data-status="{{ row['PaymentStatus'] }}">
                            View Details
                        </a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- details popup -->
    <div class="modal fade" id="jobs-details-new">
        <div class="modal-dialog sales-details-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Sales Detail: <span id="modal-sales-id">SL0101</span></h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    <h6>Customer Info</h6>
                    <p id="modal-customer-info">walk-in-customer<br>walk-in-customer@example.com<br>123456780<br>N45, Dhaka</p>

                    <h6>Company Info</h6>
                    <p id="modal-company-info">DGT<br>admin@example.com<br>6315996770<br>3618 Abia Martin Drive</p>

                    <h6>Invoice Info</h6>
                    <p id="modal-invoice-id">SL0101</p>
                    <h6>Payment Status</h6>
                    <p id="modal-payment-status">Paid<br>Completed</p>
                </div>
            </div>
        </div>
    </div>
    <!-- /details popup -->

    <script>
        $(document).ready(function() {
            // When a user clicks on the view details link
            $('.view-details').on('click', function() {
                // Retrieve data from the link's data attributes
                var superId = $(this).data('superid');
                var customerInfo = $(this).data('customer');
                var companyInfo = $(this).data('company');
                var invoiceId = $(this).data('invoice');
                var paymentStatus = $(this).data('status');

                // Populate the modal with the retrieved data
                $('#modal-sales-id').text(invoiceId);
                $('#modal-customer-info').html(customerInfo);
                $('#modal-company-info').html(companyInfo);
                $('#modal-invoice-id').text(invoiceId);
                $('#modal-payment-status').html(paymentStatus);
            });
        });
    </script>
</body>
</html>
